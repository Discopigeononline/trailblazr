<div class="container d-flex justify-content-center">
  <div class="col-8">
    <h1 class="my-3"><%= @itinerary.title %></h1>

    <%# collaborations %>
    <div>
      <p><strong>TrailBlazrs: </strong></p>
      <% @itinerary.users.each do |user| %>
        <div>
          <i class="fa-solid fa-user"></i><%= " #{user.first_name} #{user.last_name}" %>
        </div>
      <% end %>
      </div class="my-3">
      <%= link_to "Add TrailBlazrs", @new_itinerary_collaboration_path %>

          <%# Back to All Itineraries %>
      <div class="d-flex justify-content-start">
        <%= link_to "Back to All Itineraries", itineraries_path, class:"btn btn-primary text-align-center me-3" %>

        <%# Hide the links for unauthorized users: %>
        <% if policy(@itinerary).edit? %>
          <%= link_to "Edit this itinerary", edit_itinerary_path(@itinerary), class: "btn btn-success me-3" %>
        <% end %>

        <% if policy(@itinerary).destroy? %>
          <%= button_to "Destroy this itinerary", @itinerary, method: :delete, class: "btn btn-danger me-3", data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} %>
        <% end %>

      </div>
    </div>

  <div class="col-4">
    <%= render "itineraries/chat" %>
  </div>
</div>

<%# selections %>


<div class="row small-card-row mt-3 ms-4">
    <h6>Wish List</h6>
    <% @selections.each do |selection| %>

    <div class="col-8">
      <div class="card small-card mb-2 shadow">
      <div class="d-flex justify-content-between align-items-center mb-1">
        <h6 class="fw-bold small-card-text-title me-3 mb-0 pb-0"><%= selection.activity.name.truncate(27, separator: ' ') %></h6>

        <div class="d-flex gap-1" data-controller="add-activity-to-day">
          <%= link_to new_itinerary_selection_path(@itinerary, selection.activity) do %>
            <i class="fa-regular fa-square-plus btn-primary" data-action="click->add-activity-to-day#displayForm"></i>
          <% end %>
          <%= link_to selection_path(selection.activity), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}  do %>
            <i class="fa-regular fa-trash-can text-danger"></i>
          <% end %>
          <%# <%= simple_form_for selection, html: {class: "d-none", data: {add_activity_to_day_target: "form"}} do |f| %>
            <%# <%= f.input :day %>
            <%# <%= f.submit %>
          <%# <% end %>
        </div>

      </div>

      <p class="card-text fw-bold"><%= selection.activity.description.truncate(90, separator: ' ') %></p>
    </div>
    </div>

    <div class="col-4">
      <%= image_tag selection.activity.image_url, class: 'small-card-img shadow w-100' %>
    </div>

    <% end %>
    <div>

<%# group_by day hash in controller day on selection model %>

    <% @selections_with_days.each do |day, selection| %>
      <div>Day<%= day %></div>
      <% selection.each do |selection| %>
        <div><%= selection.activity.name %></div>
      <% end %>
    <% end %>


<%# TO MAKE A _PATH %>
<%# => prefix_path %>
<%# a. if the url you are trying to build has no ids, this is enough %>
<%# example: itineraries_path  %>
<%# b. if the url you are trying to build needs an id, you need to pass the instance as an argument %>
<%# example: itinerary_collaborations_path(@itinerary) %>
<%#  is going to create a url like: /itineraries/40/collaborations %>
