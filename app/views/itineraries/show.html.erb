<div class="container d-flex justify-content-center">
  <div class="col-8">
    <h1 class="my-3"><%= @itinerary.title %></h1>

    <%# collaborations %>
    <div>

      <p><strong>TrailBlazrs: </strong></p>

      <% @itinerary.collaborations.each do |collaboration|%>
        <p>
          <% if collaboration.role == "admin" %>
            <i class="fa-solid fa-user"></i> <%= @itinerary.users.first.email %> <%= @itinerary.users.first.last_name %> - <%= "admin" %>
          <% else %>
            <i class="fa-solid fa-user fa-2xs"></i> <%= "#{collaboration.email}" %> - <%= collaboration.role %>
            <%= link_to collaboration_path(collaboration), method: :delete, data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' } do %>
              <i class="fas fa-trash"></i>
            <% end %>
          <% end %>
        </p>
      <% end %><br>

      <%= render "itineraries/collaboration_form" %>


      <%# Back to All Itineraries %>
      <div class="d-flex justify-content-start">
        <%= link_to "Back to All Itineraries", itineraries_path, class:"btn btn-primary text-align-center me-3" %>
        <%# Hide the links for unauthorized users: %>
        <% if policy(@itinerary).edit? %>
          <%= link_to "Edit this itinerary", edit_itinerary_path(@itinerary), class: "btn btn-success me-3" %>
        <% end %>
        <% if policy(@itinerary).destroy? %>
          <%= button_to "Destroy this itinerary", @itinerary, method: :delete, class: "btn btn-danger me-3", data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} %>
        <% end %>
      </div>

    </div>
  </div>

  <div class="col-4">
    <%= render "itineraries/chat" %>
  </div>
</div>

<%# TO MAKE A _PATH %>
<%# => prefix_path %>
<%# a. if the url you are trying to build has no ids, this is enough %>
<%# example: itineraries_path  %>
<%# b. if the url you are trying to build needs an id, you need to pass the instance as an argument %>
<%# example: itinerary_collaborations_path(@itinerary) %>
<%#  is going to create a url like: /itineraries/40/collaborations %>
